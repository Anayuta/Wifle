/*
 * Compressed by JSA(www.xidea.org)
 */
jQuery.fn.center=function(){this.css("position","absolute");this.css("top",(($(window).height()-this.outerHeight())/2)+$(window).scrollTop()+"px");this.css("left",(($(window).width()-this.outerWidth())/2)+$(window).scrollLeft()+"px");return this};$(document).ready(function(){if(!swfobject.hasFlashPlayerVersion("9"))$("#installFlash").show();loadi18n()});function loadi18n(){$.i18n.properties({path:"i18n/",mode:"map",callback:function(){autoi18n();list("")}})}function autoi18n(){$("a,span,th,td").filter(function(){return $(this).attr("ex.i18n")}).each(function(){var _=$(this).attr("ex.i18n");$(this).html($.i18n.prop(_))})}function list(A){$(window.opera?"html":"html, body").animate({scrollTop:0},"slow");$("#table-state-content").fadeIn();var _=new Date().getTime();$.getJSON("/list",{"p":A,"t":_},function(_){$("#table-state-content").fadeOut();$("#tab-files").find("tbody tr").remove();currentDirectory=_[0];buildBreadcrumb(_[1]);buildFileList(_[2])})}function buildBreadcrumb(_){var B=$("#breadcrumb"),A=[];$.each(_,function($,_){A.push("<li>");A.push("<a href='javascript:void(0);' onclick='list(\""+_.relativePath+"/\");return false;'>");A.push(_.name);A.push("</a> <span class='divider'>/</span>");A.push("</li>")});A.push("<li class=\"active\">You are here</li>");B.html(A.join(""))}function deleteFile(_){if(!confirm($.i18n.prop("confirm_delete")))return;$("#right-corner-tip").center().html("<p>"+$.i18n.prop("wait_delete_file")+"</p>").fadeIn();$.get("/delete",{"f":_,t:new Date().getTime()},function(_){$("#right-corner-tip").fadeOut();list(currentDirectory)})}function buildFileList(_){var B=$("#tab-files").find("tbody"),C=_.length;if(C==0)B.append("<tr><td colspan='6' style='text-align:center'><span>"+$.i18n.prop("do_not_have_any_file")+"</span></td></tr>");else{var A=null;$.each(_,function(_,C){A=[];A.push("<tr>");A.push("<td title='"+C.name+"'>");A.push("<img src='/icon?f="+C.ext+"' align='absmiddle' />&nbsp;");if(C.isDirectory)A.push("<a href='javascript:void(0);' onclick='list(\""+C.relativePath+"\");return false;'>");else A.push("<a href='/down?f="+C.relativePath+"'>");A.push(C.name);A.push("</a>");A.push("</td>");A.push("<td style='text-align:center;'>");A.push(C.modifiedDate);A.push("</td>");A.push("<td>");A.push($.i18n.prop(C.typeDesc));A.push("</td>");A.push("<td>");if(!C.isDirectory){A.push("<div align='right' title='"+C.bytes+"'>");A.push(C.size);A.push("</div>")}else A.push("&nbsp;");A.push("</td>");A.push("<td style='text-align:center;'>");if(!C.isDirectory){A.push("<button class='btn normal'>");A.push("<a href='/down?f="+C.relativePath+"'>");A.push($.i18n.prop("action_download"));A.push("</a>");A.push("<button>");}else A.push("&nbsp;");A.push("</td>");A.push("<td style='text-align:center;'>");A.push("<button class='btn danger' onclick='deleteFile(\""+C.relativePath+"\")'>");A.push($.i18n.prop("action_delete"));A.push("<button>");A.push("</td>");A.push("</tr>");B.append(A.join(""))})}}